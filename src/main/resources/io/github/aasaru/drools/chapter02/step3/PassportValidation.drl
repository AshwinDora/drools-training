package io.github.aasaru.drools.chapter01
 
import io.github.aasaru.drools.domain.Passport;
import java.time.LocalDate;

rule "Valid passport"
    dialect "mvel"
    agenda-group "post-process"
    when
        $passport: Passport( validationPassed == null  )
    then
        System.out.println( $passport + " is still without validation info, consider OK" );
        modify($passport) {
          setValidationPassed(true)
        }
end

rule "Expired passport"
    dialect "mvel"
    agenda-group "find-invalid"
    when
        $passport: Passport( isExpired()  )
    then
        System.out.println( $passport + " is INVALID because it is expired" );
        modify($passport) {
          setValidationPassed(false)
        }
end

rule "Full passport"
    dialect "mvel"
    agenda-group "find-invalid"
    when
        $passport: Passport( unusedVisaPages == 0   )
    then
        System.out.println( $passport + " is INVALID because it has no space for visa" );
        modify($passport) {
          setValidationPassed(false)
        }
end







// better is to define logical groups. the order within groups is arbitary
// see Java code
// notice that stacks work first in- last out.

